#!/bin/sh
#
# $Id: rtpproxy.in,v 1.3 2008/06/17 03:34:50 sobomax Exp $
#

# Add the following lines to /etc/rc.conf to enable RTPproxy:
#
# rtpproxy_enable="YES"

# PROVIDE: rtpproxy
# REQUIRE: DAEMON
# BEFORE: opensips kamailio

prefix=/usr/local

. /etc/rc.subr

name=rtpproxy
rcvar=`set_rcvar`

command="${prefix}/bin/rtpproxy"
pidfile="/var/run/rtpproxy.pid"

load_rc_config ${name}

rtpproxy_enable=${rtpproxy_enable:-"NO"}
rtpproxy_laddr=${rtpproxy_laddr:-"0.0.0.0"}
rtpproxy_ctrl_socket=${rtpproxy_ctrl_socket:-"udp:0.0.0.0:7722"}
rtpproxy_paddr=${rtpproxy_paddr:-"0.0.0.0"}
rtpproxy_usr=${rtpproxy_usr:-"rtpproxy"}
rtpproxy_grp=${rtpproxy_grp:-"rtpproxy"}

command_args="-u ${rtpproxy_usr}:${rtpproxy_grp} -A ${rtpproxy_paddr} -F -l ${rtpproxy_laddr} -s ${rtpproxy_ctrl_socket} -d INFO -p /var/run/rtpproxy.pid"

run_rc_command "${1}"
